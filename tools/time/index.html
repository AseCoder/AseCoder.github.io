<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Time Tool</title>
</head>
<body>
	<h1>THE TIME TOOL</h1>
	<p>format time:</p>
	<div style="margin-left: 20px;">
		<label for="time">input milliseconds:</label>
		<input type="text" placeholder="Î”t" id="time" name="time" oninput="doFormatTime()">
		<br>
		<label for="accuracy">accuracy:</label>
		<input type="text" id="accuracy" name="accuracy" placeholder="2" oninput="doFormatTime()">
		<br>
		<input type="checkbox" id="longNames" name="longNames" oninput="doFormatTime()">
		<label for="longNames">long names</label>
		<br>
		<input type="checkbox" id="commas" name="commas" oninput="doFormatTime()">
		<label for="commas">commas</label>
		<p>output:</p>
		<p id="formatOutput" style="border-left: 1px solid lightgray; padding-left: 20px;"></p>
	</div>
	<br>
	<p>parse time:</p>
	<div style="margin-left: 20px;">
		<label for="time">input formatted time:</label>
		<input type="text" placeholder="1d 12h" id="parsetime" name="parsetime" oninput="doParseTime()">
		<p>output (milliseconds):</p>
		<p id="parseOutput" style="border-left: 1px solid lightgray; padding-left: 20px;"></p>
	</div>
	<br>
	<p>convert time:</p>
	<div style="margin-left: 20px;">
		<label for="convertinput">input time to convert:</label>
		<input type="text" placeholder="3600s" id="convertinput" name="convertinput" oninput="doConvertTime()">
		<label for="converttarget">target time name:</label>
		<input type="text" id="converttarget" name="converttarget" placeholder="minute" oninput="doConvertTime()">
		<p>output:</p>
		<p id="convertoutput" style="border-left: 1px solid lightgray; padding-left: 20px;"></p>
	</div>

</body>
<script src="formatTime.js"></script>
<script src="parseTime.js"></script>
<script src="timeNames.js"></script>
<script>

	function doFormatTime() {
		console.log('changed');
		document.getElementById('formatOutput').innerText = formatTime(parseInt(document.getElementById('time').value), parseInt(document.getElementById('accuracy').value), {
			longNames: document.getElementById('longNames').checked,
			commas: document.getElementById('commas').checked
		}) || '';
	}

	function doParseTime() {
		console.log('changed');
		document.getElementById('parseOutput').innerText = parseTime(document.getElementById('parsetime').value) || '';
	}

	function doConvertTime() {
		const targetText = document.getElementById('converttarget').value;
		const target = targetText ? timeNames.find(x => x.name.startsWith(targetText === 'm' ? 'minute' : targetText)) : { name: 'ms', length: 1 };
		document.getElementById('convertoutput').innerText = (parseTime(document.getElementById('convertinput').value) / target.length).toLocaleString('en-US', { maximumFractionDigits: 4 }) + target.name.slice(0, ['ms', 'month'].includes(target.name) ? 2 : 1);
	}
	

</script>
</html>